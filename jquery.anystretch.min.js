/*
 * jQuery Anystretch
 * Version 1.2 (@jbrooksuk / me.itslimetime.com)
 * https://github.com/jbrooksuk/jquery-anystretch
 * Based on Dan Millar's Port
 * https://github.com/danmillar/jquery-anystretch
 *
 * Add a dynamically-resized background image to the body
 * of a page or any other block level element within it
 *
 * Copyright (c) 2012 Dan Millar (@danmillar / decode.uk.com)
 * Dual licensed under the MIT and GPL licenses.
 *
 * This is a fork of jQuery Backstretch (v1.2)
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
*/
!function(t){t.fn.anystretch=function(e,n,i){var o=!1;return this.each(function(a){function s(e){try{p={left:0,top:0},h=d(),(l=h/c)>=r()?(g=(l-r())/2,"center"==v.positionY||v.centeredY?t.extend(p,{top:"-"+g+"px"}):"bottom"==v.positionY&&t.extend(p,{top:"auto",bottom:"0px"})):(l=r(),g=((h=l*c)-d())/2,"center"==v.positionX||v.centeredX?t.extend(p,{left:"-"+g+"px"}):"right"==v.positionX&&t.extend(p,{left:"auto",right:"0px"})),b.children("img:not(.deleteable)").width(h).height(l).filter("img").css(p)}catch(t){console.log(t)}"function"==typeof e&&e()}function d(){return o?m.width():m.innerWidth()}function r(){return o?m.height():m.innerHeight()}var c,h,l,g,p,f,u={positionX:"center",positionY:"center",speed:0,elPosition:"relative",dataName:"stretch",responsiveDataName:"stretch-responsive",nonbgDataName:"stretch-nonbg",imgAlt:"stretch-alt",imgTitle:"stretch-title"},m=t(this),b=o?t(".anystretch"):m.children(".anystretch"),v=b.data("settings")||u;b.data("settings");return n&&"object"==typeof n&&t.extend(v,n),n&&"function"==typeof n&&(i=n),t(document).ready(function(){if(e||m.length>=1){var n;if(v.screenSizes=[],o||m.css({position:v.elPosition,background:"none"}),0==b.length?b=t("<div />").attr("class","anystretch").css({left:0,top:0,position:o?"fixed":"absolute",overflow:"hidden",zIndex:o?-999999:-999998,margin:0,padding:0,height:"100%",width:"100%"}):b.find("img").addClass("deleteable"),n=t("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(e){var n,o,a=t(this);a.css({width:"auto",height:"auto"}),n=this.width||t(e.target).width(),o=this.height||t(e.target).height(),c=n/o,s(function(){a.fadeIn(v.speed,function(){b.find(".deleteable").remove(),"function"==typeof i&&i()})})}).appendTo(b),0==m.children(".anystretch").length&&(o?t("body").append(b):m.append(b)),b.data("settings",v),e?f=e:m.data(v.dataName)&&(f=m.data(v.dataName)),m.data(v.nonbgDataName)&&(b.parent().css({position:"relative",overflow:"hidden"}),b.addClass("nonbg").css({zIndex:1,position:"relative"}),n.css({zIndex:1,position:"relative"})),!f)return;t(window).resize(s),n.attr("src",f),console.log(m.data("stretch-alt")),void 0!==m.data(v.imgAlt)&&n.attr("alt",m.data(v.imgAlt)),void 0!==m.data(v.imgTitle)&&n.attr("title",m.data(v.imgTitle))}}),this})},t.anystretch=function(e,n,i){t("onorientationchange"in window?document:window).anystretch(e,n,i)}}(jQuery);
