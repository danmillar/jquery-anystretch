/*
 * jQuery Anystretch
 * Version 1.1
 * https://github.com/danmillar/jquery-anystretch
 *
 * Add a dynamically-resized background image to the body
 * of a page or any other block level element within it
 *
 * Copyright (c) 2012 Dan Millar (@danmillar / decode.uk.com)
 * Dual licensed under the MIT and GPL licenses.
 *
 * This is a fork of jQuery Backstretch (v1.2)
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
*/(function(e){e.fn.anystretch=function(t,n,r){var i=this.selector.length?!1:!0;return this.each(function(s){function g(){if(t){var n;i||u.css({position:f.elPosition,background:"none"});a.length==0?a=e("<div />").attr("class","anystretch").css({left:0,top:0,position:i?"fixed":"absolute",overflow:"hidden",zIndex:i?-999999:-999998,margin:0,padding:0,height:"100%",width:"100%"}):a.find("img").addClass("deleteable");n=e("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(t){var n=e(this),i,s;n.css({width:"auto",height:"auto"});i=this.width||e(t.target).width();s=this.height||e(t.target).height();c=i/s;f.imgWidth=i;f.imgHeight=s;b(function(){n.fadeIn(f.speed,function(){a.find(".deleteable").remove();typeof r=="function"&&r()})})}).appendTo(a);u.children(".anystretch").length==0&&(i?e("body").append(a):u.append(a));a.data("settings",f);n.attr("src",t);e(window).resize(b)}}function y(e,t,n,r,i){var s=t/r,o=n/i,u=Math.max(s,o),a=r*.5/(r/2-Math.abs(e.x)),f=i*.5/(i/2-Math.abs(e.y)),l=Math.max(a,f)-1,c=r*u*(1+l),h=i*u*(1+l),p=e.x*u/(t-c)*(1+l),d=-(e.y*u)/(n-h)*(1+l),v=(t-c)*(.5+p),m=(n-h)*(.5+d);return{width:c,height:h,offsetX:v,offsetY:m}}function b(e){try{var t={x:f.offsetX,y:f.offsetY,absolute:!1},n=y(t,w(),E(),f.imgWidth,f.imgHeight);console.log(n);m={left:n.offsetX,top:n.offsetY};p=n.width;d=n.height;a.children("img:not(.deleteable)").width(p).height(d).filter("img").css(m)}catch(r){}typeof e=="function"&&e()}function w(){return i?u.width():u.innerWidth()}function E(){return i?u.height():u.innerHeight()}var o={positionX:"center",positionY:"center",speed:0,elPosition:"relative"},u=e(this),a=i?e(".anystretch"):u.children(".anystretch"),f=a.data("settings")||o,l=a.data("settings"),c,h,p,d,v,m;n&&typeof n=="object"&&e.extend(f,n);n&&typeof n=="function"&&(r=n);e(document).ready(g);return this})};e.anystretch=function(t,n,r){var i="onorientationchange"in window?e(document):e(window);i.anystretch(t,n,r)}})(jQuery);